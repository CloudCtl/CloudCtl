---
- name: '{{ ansible_name_module }} | cmd:podman.rm | Podman purge nginx' 
  command:
    cmd: 'podman rm --force nginx'
  no_log: true
  ignore_errors: true
  when: pod_force_rm == true

- name: '{{ ansible_name_module }} | file:absent | Podman purge nginx' 
  file:
    path: '{{ dir_tmp }}/{{ name_pod_cloudctl }}-nginx.pid'
    state: absent
  when: pod_force_rm == true

- name: '{{ ansible_name_module }} | cmd:podman_container | Podman create {{ module }}' 
  containers.podman.podman_container:
    detach: yes
    name: "nginx"
    pod: "cloudctl"
    state: "started"
    recreate: "true"
    image: docker.io/cloudctl/nginx
    volume:
      - "{{ dir_platform }}/nginx/html:/var/www/html:z"
      - "{{ dir_platform }}/nginx/nginx.conf:/etc/nginx/nginx.conf:z"
      - "{{ dir_secrets }}/cloudctl/certs/ssl/server/cloudctl.crt:/nginx.crt"
      - "{{ dir_secrets }}/cloudctl/certs/ssl/server/cloudctl.pem:/nginx.key"
